<head>
	<title>brainstorm</title>
</head>

<body>
    {{> login}}
	{{#if currentUser}}
		{{> toolbar}}
		{{> main}}
		{{> ideaInput}}
	{{/if}}
</body>

<template name="login">
    {{#if currentUser}}
    <div style="color:#aaaaaa;float:left" margin:10px="">Logged in as: 	{{username}}</div>
    {{/if}}
    <div style="margin:10px">
        {{loginButtons}}
    </div>
</template>

<template name="main">
    <div style="display:none;">{{doNothing}}</div>
    <div id="wrapper">
		<canvas id="mainCanvas" width="{{getWindowWidth}}" height="{{getWindowHeight}}"/>
	</div>
	{{> chat}}
</template>

<template name="toolbar">
	<div id="toolbar">
		<button id="ideaModeSelector" class="btn btn-lg {{isIdeaMode}}">Idea</button>
		<button id="pencilModeSelector" class="btn btn-lg {{isPencilMode}}">Pencil</button>
		{{#if showEraserButton}}
		<button id="erasorSelector" class="btn btn-lg {{isEraserMode}}">Eraser</button>
		{{/if}}
		<button id="clearCanvas" class="btn btn-lg btn-default">Clear</button>
	</div>
</template>

<template name="ideaInput">
	<div id="ideaInput" class="modal fade">
		<input type="text" id="ideaInputText" placeholder="Enter idea..."/><br/>
		<button id="ideaInputCancel">Cancel</button>
		<button id="ideaInputSubmit">Save</button>
		<button id="ideaInputDelete">Delete</button>
	</div>
</template>

<template name="chat">
	<div id="chatbox">
		<div id="chatstream" style="max-height:{{getHeight}}px;">
			{{#each messages}}
			<div class="msg">
                <div class="msgheader">
                    <span class="msguser">{{username}}</span>
                    <span class="msgdate">{{formatDate}}</span>
                </div>
				<div class="msgtext">{{text}}</div>
			</div>
			{{/each}}
		</div>
		<div id="inputbox" class="">
			<input id="inputtext" class="form-control" placeholder="Write something..." />
		</div>
	</div>
</template>
